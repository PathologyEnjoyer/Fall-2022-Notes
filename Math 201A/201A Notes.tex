\documentclass[x11names,reqno,14pt]{extarticle}
\input{preamble}
\usepackage[document]{ragged2e}
\usepackage{amsmath}
\pagestyle{fancy}{
	\fancyhead[L]{Fall 2022}
	\fancyhead[C]{201A - Real Analysis}
	\fancyhead[R]{John White}
  
  \fancyfoot[R]{\footnotesize Page \thepage \ of \pageref{LastPage}}
	\fancyfoot[C]{}
	}
\fancypagestyle{firststyle}{
     \fancyhead[L]{}
     \fancyhead[R]{}
     \fancyhead[C]{}
     \renewcommand{\headrulewidth}{0pt}
	\fancyfoot[R]{\footnotesize Page \thepage \ of \pageref{LastPage}}
}
\newcommand*{\oo}{\infty}
\newcommand{\seq}[1]{_{#1 = 1}^\oo}
\title{220A - Groups}
\author{John White}
\date{Fall 2022}




\begin{document}

\section*{Lecture 1}

\subsection*{Why measure theory?}

We want to answer questions like the following: what is the ``total length" of an arbitrary $E \subseteq \R$? What about the ``total area" of an arbitrary $E \subseteq \R^2$? 

In other words, can we define a function $\mu:2^{\R^d}\to[0, + \infty)$ so that $\mu(E)$ is sufficiently ``nice?"

What properties would we like a function $\mu$ (called a measure) to have? Let's stick to $\R$ for now.

\begin{enumerate}
\item For $E = [a, b]$ (or $(a, b)$), we'd like $\mu(E) = b - a$.
\item For a sequence of disjoint intervals $I_i\subseteq \R$, 
\[
\mu\left(\bigcup_{i=1}^nI_i\right) = \sum_{i=1}^n\mu(I_i)
\]
\end{enumerate}

What about $\Q \cap [0, 1]$? What about the area under a curve?

What if $E$ is any arbitrary set????

\subsection*{Pre measure theory}

In the mid 1800s, Riemann first defined the Riemann integral in terms of upper and lower sums. 

Fortunately, it's good enough for most ``ordinary" functions a student might encounter when doing calculus for the first time. 

Unfortunately, it's not good for taking limits. 

For example, given $f_1, f_2, f_3, \cdots :[a, b]\to\R$ such that $\lim_{n\to\infty}f_n(x) \eqdef f(x)$ exists for all $x$, when can we conclude that
\[
\lim_{n\to\infty}\int_a^bf_n(x)\,dx = \int_a^b\lim_{n\to\infty}f_n(x)\,dx = \int_a^bf(x)\,dx
\]
We learn in undergraduate real analysis that we may only conclude the above if the $f_n$ converge uniformly to $f$. 

\subsection*{Measure theory}

Measure theory allows us to define a much more powerful theory of integration, giving us 
\begin{itemize}
\item More integrable functions
\item An integral which behaves better with limits
\item An integral ideally suited for probability theory. 
\end{itemize}

Our first goal will be to define a function $\mu:2^\R\to[0,\infty)$ satisfying the following:

\begin{enumerate}
\item If $E_1, E_2, \dots$ is a countable sequence of disjoint sets, then 
\[
\mu\left(\bigcup E_i \right) = \sum\mu(E_i)
\]
If $\mu$ satisfies this, we say it is ``countably additive."

\item $\mu([a, b]) = b - a$ for all such intervals. 

\item $\mu$ is translation invariant, i.e. for any $t \in \R$, 
\[
\mu(E + t) = \mu(E)
\]
Where ``$E + t$" $\eqdef\{x + t \mid x \in E\}$
\end{enumerate}

\thm{(Vitali)} There is no such $\mu$.



\proof

Suppose that such a $\mu$ exists. 

\claim

If $A \subseteq B$, then $\mu(A) \leq \mu(B)$.

\proof

Note $B = A \coprod (B \backslash A)$, so 
\[
\mu(B) = \mu(A) + \mu(B \backslash A)
\]

And because $\mu$ is always nonnegative, we may conclude that $\mu(B) \geq \mu(A)$. 

\qed

Now, define an equivalence relation on $\R$ as follows:
\begin{align*}
x \sim y <=> x - y \in \Q \\
[x] \eqdef \{y \in \R \mid x \sim y\}
\end{align*}

\claim

Every equivalence class contains a point in $[0, 1]$. 

\proof

Homework exercise. 

\qed 

Now, for each equivalence class, choose an element in $[0, 1]$ belonging to that class. For this step, we are using choice and, it turns out, there is no way not to in this proof. 

Call the resulting set $A$. So $A \subseteq [0, 1]$, and for any $x$, $[x] \cap A$ is a singleton. 

Let $B = \bigcup_{q\in\Q\cap[-1,1]}A + q$

Note that this is a disjoint union: indeed, if $A + q$ intersects nontrivially with $A + q'$ for $q \neq q',$ then there are $x, x'$ in $A$ such that $x = x' + q$, and so $x \sim x'$, which by construction is impossible. 

\claim 
$[0, 1]\subseteq B \subseteq[-1, 2]$. 

\proof

First, if $x \in [0, 1]$, then $x = a + q$ for some $a \in A\subseteq[0, 1], q = x - a \in [-1, 1]$. Thus, $x \in B$. 

Next, if $b \in B$, then $b = a + q$, for $q \in A = [0, 1]$ and $q \in [-1, 1]$, so $b \in [-1, 2]$. 

So we must conclude by the lemma that 
\[
1 = \mu([1, 0]) \leq \mu(B) \leq \mu([-1, 2]) = 3
\] 

But by the properties of $\mu$, we also have
\[
\mu(B) = \sum_{q\in\Q\cap[0, 1]}\mu(A + q) = \sum_{q\in\Q\cap[0,1]}\mu(A)
\]
The sum on the right hand side is either $0$ or $\infty$. But we just showed that it is between $1$ and $3$, a contradiction. Therefore, $\mu(A)$ cannot be defined. 

\qed

So, if this is impossible, which criterion should we weaken to make it possible? 

If we weaken the first to get finite additivity, we run into problems for $d \geq 3$, for example the Banach-Tarski paradox. 

If we weaken the other two, then $\mu$ is no longer compactible with the usual notion of ``length." 

\subsection*{Two good choices}
\begin{itemize}
\item Given a measure on a family of sets, it extends to an outer measure on all sets. 
\item Similarly, given an outer measure, you can single out ``nice sets" on which it is a measure. 
\end{itemize}

What kind of family of subsets should we restrict to? 

Let $X$ be a set. 

\defn $\mathcal{A}$ is an \underline{algebra of subsets of $X$} if $\mathcal{A} \neq \varnothing$, and 
\begin{itemize}
\item 
\(
E_1, \dots, E_n \in \mathcal{U} \implies \bigcup_{i=1}^nE_i \in \mathcal{U}
\).
 In other words, it is ``closed under finite unions." 
\item
\(
E \in \mathcal{U} \implies X \backslash E \in \mathcal{U}
\). 
In other words it is ``closed under compliments."
\item 
\(
\varnothing, X \in \mathcal{A}
\). 
\end{itemize}

\lem 

If $\mathcal{A}$ is an algebra of subsets, then $\mathcal{A}$ is closed under finite intersections.

\proof 

Homework 2

\exm

\begin{itemize}
\item[(i)] $\mathcal{A} = 2^X$
\item[(ii)] $\mathcal{A} = \{\varnothing, X\}$
\item[(iii)] $\mathcal{A} =$ all finite OR cofinite subsets of $X$ (cofinite means the complement is finite). 
\end{itemize}

\defn A \underline{$\sigma$-algebra} $\mathcal{A}$ is an algebra that is closed under countable unions. 

\rem

$\sigma$-algebras are closed under countable intersections. 

\exm

Above, $(i)$ and $(ii)$ are $\sigma$-algebras, but $(iii)$ is not. 

\prop

Given any family $\mathcal{E}$ of subsets of $X$, there is a smallest $\sigma$-algebra $\mu(\mathcal{E})$ containing $\mathcal{E}$, meaning that if $\mathcal{F}$ is a $\sigma$-algebra containing $\mathcal{E}$, then $\mu(\mathcal{E}) \subseteq \mathcal{F}$. 


\section*{Lecture 2}


\defn
Given a nonempty set $X$ and $\mathcal{M}$ a $\sigma$-algebra of subsets of $X$, we call $(X, \mathcal{M})$ a \underline{measurable space}.

Recall: 

\prop

Given any family $\mathcal{E}$ of subsets of $X$, there is a smallest $\sigma$-algebra $\mathcal{M}(\mathcal{E})$ containing $\mathcal{E}$, meaning that if $\mathcal{F}$ is a $\sigma$-algebra containing $\mathcal{E}$, then $\mathcal{M}(\mathcal{E}) \subseteq \mathcal{F}$. 

\proof

We begin with a claim. 

\claim Given any nonempty collection $\mathcal{C}$ of $\sigma$-algebras on $X$, then 
\[
\cap \mathcal{C} \eqdef \{E \subseteq X \mid E \in \mathcal{A} \forall \mathcal{A} \in \mathcal{C}\}
\]
is a $\sigma$-algebra. 

\proof Homework 2

\qed

Let $\mathcal{C} = \{\mathcal{A} \mid \mathcal{A}$ is a $\sigma$-algebra on $X$ and $\mathcal{E} \subseteq \mathcal{A}\}$. $\mathcal{C}$ is nonempty, because $2^X \in \mathcal{C}$. By the claim, $\cap\mathcal{C}$ is a $\sigma$-algebra. By the definition of $\mathcal{C}$, $\mathcal{E}\subseteq\mathcal{C}$ and for any $\sigma$-algebra $\mathcal{A}$ such that $\mathcal{E} \subseteq \mathcal{A},$ $\cap\mathcal{C} \subseteq \mathcal{A}$.

Thus $\mathcal{M}(\mathcal{E}) = \cap\mathcal{C}$ is the smallest $\sigma$-algebra containing $\mathcal{E}$.

\qed 

\rem Intuitively, $\mathcal{M}(\mathcal{E})$ is a $\sigma$-algebra containing the sets in $\mathcal{E}$ by ``going from the outside in," starting with $\sigma$-algebras that are ``too big" and taking intersections. 

Recall: a topology $\tau$ is a collection of subsets of a set $X$ (called open sets), which is closed under arbitrary unions and finite intersections, and $X, \varnothing \in \tau$

Let $(X, \tau)$ be a topoological space. 

\defn \underline{The Borel $\sigma$-algebra} of $X$, denoted $\mathcal{B}X$, is the $\sigma$-algebra generated by the open subsets of $X$. Its members are known as \underline{Borel sets}. 

What do the Borel sets look like? Let's go from the ``inside out." 

Let $\mathcal{F} = $open sets in $X$, $\mathcal{F}^\sigma$ all countable unions of sets in $\mathcal{F}$, $\mathcal{F}^\delta$ all countable intersections, and $\bar{\mathcal{F}}$ complements of sets in $\mathcal{F}$. 

To build Borel sets: 

\[
\mathcal{F}\to\mathcal{F}^\delta \cup \overline{\mathcal{F}^\delta} \to\cdots \to \mathcal{B}X
\]

To learn more, look up the ``Borel hierarchy." 

\prop The \underline{Borel $\sigma$-algebra} on $\R$, which we denote $\mathcal{B}_\R$, is generated by each of the following. 
\begin{itemize}
\item[(i)] Open intervals $\mathcal{E}_1 = \{(a, b) \mid a < b, a, b \in \R\}$
\item[(ii)] Closed intervals $\mathcal{E}_2 = \{[a, b] \mid a \leq b, a,b , \in \R\}$
\item[(iii)] Half-open intervals $\mathcal{E}_3 = \{[a, b) \mid a < b, a, b, \in \R\}$
\item[(iv)] Open rays $\mathcal{E}_4 = \{(a, \infty) \mid a \in \R\}$
\item[(v)] Closed rays $\mathcal{E}_5 = \{[a, \infty) \mid a \in \R\}$
\end{itemize}

That is, $\mathcal{M}(\mathcal{E}_i) = \mathcal{B}_\R$ for any $i \in \{1, \dots, 5\}$.

\proof 

Homework 2 

\qed

Let 
\begin{itemize}
\item $\{(X_1, \mathcal{M}_i)\}_{i=1}^\infty$ be a collection of measurable spaces. 
\[
X \eqdef \prod_{i=1}^\infty X_i
\]
\item $\pi_i$ be the projection $X \to X_i$
\end{itemize}

\exm If $(X_i, \mathcal{M}_i) = (\R, \mathcal{B}_\R)$, for $i \in \{1, \dots, n\}$. Then $X = \R^n$.


\defn The \underline{product $\sigma$-algebra}
\[
\bigotimes_{i\in\N} \mathcal{M}_i \eqdef \mathcal{M}\left(\{\prod_{i\in\N} E_i \mid E_i \in \mathcal{M}_i\}\right)
\]

Our goal is to show that $\mathcal{B}_{\R^n} = \otimes_{i=1}^n\mathcal{B}_\R$. 

\prop Given $\mathcal{E}_i \subseteq 2^{X_i}$ such that $X_i \in \mathcal{E}_i$, let $\mathcal{M}_i = \mathcal{M}(\mathcal{E}_i)$. Then
\[
\bigotimes_{i\in\N} \mathcal{M}_i = \mathcal{M}\left(\{\prod_{i\in\N}E_i \mid E_i \in \mathcal{E}_i\}\right)
\] 

Note: If $\mathcal{E}\subseteq \mathcal{F},$ then $\mathcal{M}(\mathcal{E}) \subseteq \mathcal{M}(\mathcal{F})$. 
If $\mathcal{E} \subseteq \mathcal{M}(\mathcal{F}),$ then $\mathcal{M}(\mathcal{E}) \subseteq \mathcal{M}\mathcal{F}$.

Recall: Given a function $f:X\to Y$ between arbitrary nonempty sets, then 
\begin{itemize}
\item[(i)] $f^{-1}\left(\cup_{i\in\N}E_i\right) = \cup_{i\in\N}f^{-1}(E_i)$ for all $E_i \subseteq X$. 
\item[(ii)] $f^{-1}(E^c) = (f^{-1}(C))^c$, for all $E \subseteq X$. 
\end{itemize}

\proof By the first statement of the preceding note, 
\[
\mathcal{M}\left(\{\prod_{i\in\N}E_i \mid E_i \in \mathcal{E}_i\}\right) \subseteq \mathcal{M}\left(\{\prod_{i\in\N}E_i \mid E_i \in \mathcal{M}_i\}\right) = \bigotimes_{i\in\N}\mathcal{M}_i
\]
For equality, it suffices to show
\[
\mathcal{M}\left(\{\prod_{i\in\N}E_i \mid E_i \in \mathcal{M}_i\}\right) \subseteq \mathcal{M}\left(\{\prod_{i\in\N}E_i \mid E_i \in \mathcal{E}_i\}\right)
\]

Let $\mathcal{M}\left(\{\prod_{i\in\N}E_i \mid E_i \in \mathcal{E}_i\}\right) = \mathcal{A}$.

Note that 
\begin{align*}
\prod_{i\in\N}E_i  &= \{x \in X \mid \pi_i(x) \in E_i\forall i\} \\ & = \bigcap_{i\in\N}\{x \in X: \pi_i(x) \in E_i\} \\
 & = \bigcap_{i\in\N}\pi_i^{-1}(E_i) \\
\end{align*}

Because $\mathcal{A}$ is a $\sigma$-algebra, it suffices to show that $\pi_i^{-1}(E_i) \in \mathcal{A}$ for all $E_i \in \mathcal{M}_i$. 

\claim Let $\mathcal{F}_i \eqdef \{E_i \subseteq X_i \mid \pi_i^{-1}(E_i) \in \mathcal{A}\}$.

This is a $\sigma$-algebra. 

\proof

\[
\bigcup_{i=1}^\infty \pi_i^{-1}(E_i) = \pi_i^{-1}(\bigcup_{i=1}^\infty E_i)
\]

So $\{E_i\}_{i=1}^\infty \subseteq \mathcal{F}_i$. 

Similarly, 

\[
\pi_i^{-1}(E^c) = (\pi_i^{-1}(E))^c
\]
so $E \in \mathcal{F}_i$ implies $E^c \in \mathcal{F}_i$.

\section*{Lecture 3}

Because $X_i \in \mathcal{E}_i$and $\pi_i^{-1}(E_i) = X_1\times X_2\times \cdots \times E_i \times \cdots $, we know $\pi_i^{-1}(E_i)\in\mathcal{A}$ for all $E_i\in\mathcal{E}_i$. 

In other words, $\mathcal{E}_i\subseteq\mathcal{F}_i$. Since $\mathcal{F}_i$ is a $\sigma$-algebra, $\mathcal{M}(\mathcal{E}_i) = \mathcal{M}_i\subseteq\mathcal{F}_i$. 

Thus, $\pi_i^{-1}(\mathcal{E}_i) \in \mathcal{A}$ for all $E_i \in \mathcal{M}_i$ and all $i$. 

\qed

In order to characterize the Borel product $\sigma$-algebra, it will be convenient to assume our undderlying spaces have a metric that induces the topology. 



Let $(X_i, d_i), i = 1, \dots, n$ be metric spaces. 
Let
\[
X = \prod_{i=1}^nX_i
\]
Endow the product space with the metric
\[
d_{\max}((x_1, x_2, \dots, x_n), (y_1, y_2, \dots, y_n)) = \max_{i=1, \dots, n}(d_1(x_1, y_1), d_2(x_2, y_2), \dots, d_n(x_n, y_n))
\]

\thm

Given metric spaces $X_1, X_2, \dots, X_d$ and their product
\[
X = \prod_{i=1}^dX_i
\]
endowed with the metric $d_{\max}$, then $\otimes_{i=1}^n\mathcal{B}_{X_i} \subseteq \mathcal{B}_X$

If the $X_i$ are all seperable, then $\otimes_{i=1}^n\mathcal{B}_{X_i} = \mathcal{B}_X$

\rem Since the definition of $\mathcal{B}_X$ only depends on the topology of $X$, then this statement holds even if $d_{\max}$ is replaced by an equivalent metric, where ``equivalent" means ``generates the same topology."

\rem $d_{\max}$ is convenient because:
\begin{align*}
B_r(x_1, \dots, x_m) & = \{(y_1, \dots, y_n) | d_{\max}(\vec{x}, \vec{y}) < r\} \\
							 & = \{(y_2, \dots, y_n) \mid d_i(x_i, y_i) < r \forall i\} \\
							 & = \prod_{i=1}^nB_r(X_i) \\
\end{align*}

Recall:

Fact 1: If $X_1, \dots, X_m$ are seperable, so is $\prod_{i=1}^mX_i$. 

Fact 2: In a seperable metric space, every open set can be written as a countable union of balls, $\mathcal{U} = \cup_{i=1}^\infty B_i$

Fact 3: $\{\prod_{i=1}^nE_i \mid E_i \subseteq X_i, \text{open}\} \subseteq \{\text{open subsets of }X\}$

\proof: By the previous proposition, $\otimes_{i=1}^n\mathcal{B}_{X_i}$ is generated by 
\[
\{\prod_{i=1}^nE_i \mid E_i \subseteq X_{\text{open}}\} \subseteq\{\text{open subsets of }X\}
\]

Thus $\otimes_{i=1}^n\mathcal{B}_{X_i} \subseteq \mathcal{B}_X$.

Now, suppose $X_1, \dots, X_n$ are seperable. By facts 1 and 2, every open subset of $X$ can be written as a countable union of balls. 

To prove $\otimes_{i=1}^n\mathcal{B}_{X_i} = \mathcal{B}_X$, it suffices to show that 

\begin{align*}
\{\text{open subsets of }X\} & \subseteq \otimes_{i=1}^n\mathcal{B}_{X_i}\\
\end{align*}

The left hand side is equal to $\{\cup_{j=1}^\infty B_j \mid B_j \subseteq X_{\text{open}}\text{ball}\}$, and the right hand side is equal to $\mathcal{M}\left(\{\prod_{i=1}^nE_i \mid E_i \text{ open} \}\right)$

This will hold, as long as we can show $B_j \in \mathcal{M}\left(\{\prod_{i=1}^nE_i\mid E_i\text{ open}\}\right)$

Since $X$ is endowed with $d_{\max}$, we know that any open ball in $X$ can be expressed as $B = \prod_{i=1}^nB_i$, where $B_i \subseteq X_i$ is a ball. This gives the result. 

\qed

Now, it is finally time to talk about measures. 

\subsection*{\underline{Measures}}

Call $(X, \mathcal{M})$ a measurable space when $X$ is a set and $\mathcal{M}$ is a $\sigma$-algebra on $X$. 

\defn A \underline{measure} on a measurable space $(X, \mathcal{M})$ is a function $\mu:\mathcal{M}\to[0, +\infty]$ such that

\begin{enumerate}
\item[(i)] $\mu(\varnothing) = 0$
\item[(ii)] If $\{E_i\}$ is a countable disjoint collection of sets, then
\[
\mu(\bigcup E_i) = \sum \mu(E_i)
\]
This is called ``countable (disjoint) additivity"
\end{enumerate}

\exm (Dirac mass/Dirac measure)

Let $(X, \mathcal{M}) = (X, 2^X)$. 

Fix $x_0 \in X$ and define 
\[
\mu(A) = \begin{cases} 1& \text{ if }x_0 \in A \\ 0 & \text{ otherwise} \\ \end{cases}
\]

\exm (Counting measure)

Let $(X, \mathcal{M}) = (X, 2^X)$. Define
\[
\mu(A) = |A| = \text{ the number of elements in }A
\]

Given a measurable space $(X, \mathcal{M})$ and a measure $\mu$, we call $(X, \mathcal{M}, \mu)$ a \underline{measure space} and $E \in \mathcal{M}$ a \underline{measurable set} 

\thm For any measure space $(X, \mathcal{M}, \mu)$ and measurable sets $A, B, A_1, A_2, \dots \in \mathcal{M}$, 

\begin{enumerate}
\item[(i)] $A \subseteq B \implies \mu(A)\leq\mu(B)$. This is called ``monotonicity"
\item[(ii)] $\mu(\bigcup_i A_i) \leq \sum_i\mu(A_i)$. This is called ``(countable) sub additivity)."
\item[(iii)] If $A_i\subseteq A_{i + 1}$, then $\mu(\bigcup_i A_i) = \lim_{n\to\infty}\mu(A_i)$. This is called ``continuity from below." 
\item[(iv)] If $A_{i + 1} \subseteq A_i$ for all $i$, and $\mu(A_i) < \infty$, then $\mu(\bigcap A_i) = \lim_{i\to\infty}\mu(A_i)$. This is called ``continuity from above."
\end{enumerate}

\rem For $(iv)$, why do we need the additional hypothesis $\mu(A_1) < \infty$?. 

Consider the counting measure on $(\N, 2^{\N})$, and $A_i = \{n \in \N \mid n \geq i\}$, which satisfies $A_{i + 1} \subseteq A_i$, but it fails $\mu(A_1) < \infty$:
\[
0 = \mu(\varnothing) = \mu(\cap_{i=1}^\infty A_i) \neq \lim_{i\to\infty}\mu(A_i) = + \infty
\]

\proof
\begin{enumerate}
\item[(i)] Since $A \subseteq B$, $B = A \cup (B\backslash A)$, so $\mu(B) = \mu(A) + \mu(B\backslash A)$ by countable additivity. $\mu(B\backslash A) \geq 0$, so $(i)$ follows. 
\item[(ii)] Define $B_1 = A_1$, $B_2 = A_2 \backslash A_1$, $B_3 = A_3 \backslash (A_1 \cup A_2), \dots, B_n = A_n\backslash(\cup_{i=1}^{n - 1}A_i)$.
Then $\cup_i A_i = \cup_i B_i$, so by countable disjoint additivity, 
\[
\mu(\cup_i A_i) = \mu(\cup_i B_i) = \sum_i\mu(B_i) \leq \sum_i\mu(A_i)
\]
\item[(iii)] Define $B_1 = A_1$, and $B_i = A_i \backslash A_{i - 1}$. Then $A_n = \cup_{i=1}^nB_i$, so $\cup_{i=1}^\oo A_i= \cup_{i=1}^\oo B_i$. Thus $\mu(A_n) = \mu(\cup_{i=1}^nB_i) = \sum_{i=1}^n\mu(B_i)$. Consequently, 
\[
\mu(\cup_{n=1}^\oo A_n) = \mu(\cup_{i=1}^\oo B_i) = \sum_{i=1}^\oo\mu(B_i) = \lim_{n\to\oo}\sum_{i=1}^n\mu(B_i) = \lim_{n\to\oo}\mu(A_n)
\]
\item[(iv)] Next time!
\end{enumerate}

\section*{Lecture 4}

Recall

Let
\begin{itemize}
\item $(X_i, d_i)$, $i = 1, \dots, n$ metric spaces
\item $\{(X_i, \ms{M}_i)\}_{i=1}^n$ a collection of measurable spaces. 
\item $\mc{X} = \prod_{i=1}^nX_i$ product space. 
\item $d_{\max}((x_1, \dots, x_n), (y_1, \dots, y_n)) = \max\{d_i(x_i, y_i)\}$. 
\end{itemize}

\defn

\[
\bigotimes_{\alpha\in A}\ms{M}_\alpha = \mc{M}\left(\{\prod_{\alpha\in A}E_\alpha \mid E_\alpha \in \ms{M}_\alpha\}\right)
\]

We have the following theorem

\thm 

\[
\mc{B}_{\mc{X}} = \otimes_{i=1}^n\mc{B}_{X_i}
\]

That is, the Borel $\sigma$-algebra generated by the products of the $X_i$ is equal to the products of the Borel $\sigma$-algebras generated by the $X_i$. 

Now, back to measure spaces. 

\rem

The definition of Borel sets only depends on the notion of open sets, do $d_{\max}$ could be replaced with any equivalent metric. 

We will now prove that a measure satisfies continuity from above.

\proof

Let $\{A_i\}_{i\in\N}$ be a descending sequence of measurable sets.

Define $B_i = A_1\backslash A_i $

We have $B_1\subseteq B_2\subseteq B_3 \subseteq\cdots$

Note $\mu(A_1) = \mu(B_i\cup A_i) = \mu(B_i) + \mu(A_i)$ by disjoint additivity.

\[
\bigcup_{i=1}^\oo B_i = \bigcup\seq{i} (A_1\backslash A_i) = \bigcup_{i=1}^\oo A_1 \cap A_i^c = A_1 \backslash \left(\bigcap_{i=1}^\oo A_i\right)
\]
So
\begin{align*}
\mu(A_1) & = \mu\left(\left(A_1 \backslash\left(\bigcap_{i=1}^\oo A_i\right)\right)\cup \bigcap_{i=1}^\oo A_i \right) \\
         & = \mu\left(A_1 \backslash \left(\bigcap_{i=1}^\oo A_i\right)\right) + \mu\left(\bigcap_{i=1}^\oo A_i\right) \\
			& = \mu\left(\bigcap_{i=1}^\oo B_i\right) + \mu\left(\bigcap_{i=1}^\oo A_i\right) \\
			& = \lim_{i\to\oo}\mu(B_i) + \mu\left(\bigcap_{i=1}^\oo A_i\right) \\
\end{align*}

Since $\mu(A_1) < \oo$, by monotonicity, $\mu(B_i), \mu(A_i)$ are also finite, and, recalling from before,
\[
\mu(B_i) = \mu(A_1) - \mu(A_i)
\]
So, 
\[
\mu(A_1) = \lim_{i\to\oo}(\mu(A_1) - \mu(A_i)) + \mu(\cap_{i=1}^\oo A_i)
\]

So $\lim_{i\to\oo}\mu(A_i) = \mu(\cap_{i=1}^\oo A_i)$. 

\subsection*{\underline{Measure Terminology}}

\begin{itemize}
\item $\mu$ is a \underline{finite measure} if $\mu(\mc{X}) < + \oo$. 
\item $\mu$ is a \underline{$\sigma$-finite measure} if there exists $\{E_i\}\seq{i}\in \mc{M}^{\N}$ such that $\cup_{i=1}^\oo E_i = \mc{X}$ and $\mu(E_i) < +\oo$. In other words, we can chop $\mc{X}$ into countably many measurable pieces of finite size. 
\item $E$ is a \underline{null set} of $\mu$ if $E \in \mc{M}$ and $\mu(E) = 0$. 
\item We say that a property holds for \underline{$\mu$-almost every $x \in \mc{X}$} if the set of points where it doesn't hold is a null set. 
\end{itemize}

Recall our ultimate goal: a measure $\mu$ on $(\R,\mc{B}_\R)$ where $\mu((a, b)) = b - a$, and it is translation invariant.

\subsection*{\underline{Outer Measures}}

\defn

An \underline{outer measure} on a set $\mc{X}$ is a function $\mu^*:2^\mc{X}\to[0,+\oo]$ satisfying
\begin{itemize}
\item[(i)] $\mu^*(\varnothing) = 0$
\item[(ii)] $A \subseteq B \implies \mu^*(A)\leq\mu^*(B)$
\item[(iii)] $\mu^*(\cup\seq{i}A_i)\leq\sum\seq{i}\mu^*(A_i)$
\end{itemize}

\rem $(ii) + (iii)$ is equivalent to the statement that if $E\subseteq\cup\seq{i}A_i$, then $\mu^*(E) \leq \sum\seq{i}\mu^*(A_i)$. 

\exm

Let $\mc{X} = \R$. The \underline{Lebesgue Outer Measure} is defined by 
\[
\mu^*(A) = \inf\{\sum\seq{i}|b_i - a_i| : A\subseteq \bigcup\seq{i}(a_i, b_i]\}
\]

We will prove that $\mu^*$ is an outer measure. We will also show $\mu^*((a, b]) = b - a$, and $\mu^*$ is translation-invariant. 

Is $\mu^*$ countably additive? No, by Vitali's theorem. 

While we will be able to show that $\mu^*$ is an outer measure, it is \underline{not} a measure on $2^\R$. 

\defn

Let $\mc{X}$ be a nonempty set, and $\mu^*$ an outer measure on $\mc{X}$. We say $A \subseteq \mc{X}$ is \underline{$\mu^*$-measurable} if, for all $E\subseteq \mc{X}$, 
\[
\mu^*(E) = \mu^*(E \cap A) + \mu^*(E \cap A^c)
\]

\rem 

We know that if, in the above expression, ``$=$" is replaced by ``$\leq$", it holds for any $E\subseteq \mc{X}$ by countable subadditivity

\prop 

If $\mu^*(B) = 0$ for $B\subseteq \mc{X}$, then $B$ is $\mu^*$-measurable. 

\proof

Fix an arbitrary $E\subseteq \mc{X}$. Then, by monotonicity, $\mu^*(E) \geq \mu^*(E\cap B^c) = \mu^*(B) + \mu^*(E\cap B^c)$, so $\mu^*(E) = E\cap B) + \mu^*(E \cap B^c)$. 

\thm 

(Caratheodory): Given an outer measure $\mu^*$ on $\mc{X}$, let

\[
\ms{M} \eqdef \{A\subseteq X : \text{A is }\mu^*-\text{measurable}\}
\]

Then 
\begin{itemize}
\item[(i)] $\ms{M}$ is a $\sigma$-algebra
\item[(ii)] $\mu^*$ is a measure on $\ms{M}$. 
\end{itemize}

Question: Is this the ``largest" $\sigma$-algebra on which $\mu^*$ can be defined as a measure? In general, the answer is no - see hw3. 

\proof 

$\ms{M}$ is nonempty, because by the proposition, $\varnothing$ is $\mu^*$-measurable.

Now we want to see that $\ms{M}$ is closed under complements. This clearly holds by the definition of $\mu^*$. 

We will now show $\ms{M}$ is closed under finite unions. It will suffice to show that if $A, B \in \ms{M}$, then $A \cup B \in \ms{M}$. 

Fix an arbitrary $E\subseteq \mc{X}$. We have 
\begin{align*}
\mu^*(E) & = \mu^*(E \cap A) + \mu^*(E\cap A^c) \\
			& = \mu^*(E\cap A) + \mu^*(E \cap A^c \cap B) + \mu^*(E\cap A^c\cap B^c) \\
			& \geq \mu^*((E\cap A) \cup (E \cap A^c \cap B^c)) + \mu^*(E\cap A^c\cap B^c) \\
			& = \mu^*(E\cap(A\cup B)) + \mu^*(E\cap (A \cup B)^c) \\
\end{align*}

So $A \cup B$ is $\mu^*$-measurable. 

\rem 

``$\leq$" always holds by countable subadditivity. 

Now, we will show that $\mu^*|_{\ms{M}}$ is finitely additive.

\claim

 given $\{B_i\}_{i=1}^n\subseteq \ms{M}$ disjoint, then for all $A \subseteq \mc{X}$, 
\[
\mu^*(E \cap (\cup_{i=1}^n)) = \sum_{i=1}^n\mu^*(E\cap B_i)
\]

\proof

We will proceed by induction. The base case is obvious. 

Now, assume the result holds for $n - 1$. We will show it holds for $n$. We have

\begin{align*}
\mu^*(E\cap(\cup_{i=1}^n B_i)) & = \mu^*(E\cap(\cup_{i=1}^{n})\cap B_n) + \mu^*(E \cap (\cup_{i=1}^{n}B_i) \cap B_n^c \\
										  & = \mu^*(E\cap B_n) + \mu^*(E\cap(\cup_{i=1}^{n - 1}B_i)) \\
										  & = \mu^*(E\cap B_n) + \sum_{i=1}^{n - 1}\mu^*(E\cap B_i) \\
\end{align*}

We will finish next time!

\section*{Lecture 5}

Now for the exciting conclusion. 

Taking $E = \mc{X}$ in the above claim, we see $\mu^*|_{\ms{M}}$ is finitely additive. 

\claim

Given $\{B_i\}\seq{i}\subseteq \ms{M}$ disjoint, for all $E\subseteq X$, 
\[
\mu^*(E)= \sum\seq{i}(\mu^*(E\cap B_i)) + \mu^*(E\cap(\cup\seq{i}B_i)^c)
\]

\proof

The left hand side is immediately seen to be less than the right hand side due to the countable subadditivity of $\mu^*$, since 

\begin{align*}
E & = (E\cap(\cup\seq{i}B_i))\cup(E\cap(\cup\seq{i}B_i)^c) \\
  & = (\cup\seq{i}(E\cap B_i))\cup(E\cap(\cup\seq{i}B_i)^c) \\
\end{align*}

It remains to show that the left hand side is greater than or equal to the right hand side. 

Since $\ms{M}$ is closed under finite unions, $\cup_{i=1}^nB_i \in \ms{M}$, so by the definition of $\mu^*$-measurable, 
\begin{align*}
\mu^*(E) & = \mu^*(E\cap(\cup_{i=1}^nB_i)) + \mu^*(E\cap(\cup_{i=1}^nB_i)^c)\\
			& = \sum_{i=1}^n\mu^*(E\cap B_i) + \mu^*(E\cap(\cup\seq{i}B_i)^c)\\
\end{align*}

Taking the limit as $n\to\oo$ gives the result. 

Now, to show $\ms{M}$ is closed under countable unions. Fix $\{C_i\}\seq{i}\subseteq\ms{M}$. We want to show $\cup\seq{i}C_i\in\ms{M}$. 

Define $B_1 = C_1$, and in general $B_n = C_n \backslash (\cup_{i=1}^{n - 1}C_i)$

Then $B_n \in \ms{M}$ for each $n$, and $\cup\seq{i}B_i = \cup\seq{i}C_i$. 

Fix $E\subseteq \mc{X}$. Then, by a previous claim, we know 
\begin{align*}
\mu^*(E) & = \sum_{i=1}^n\mu^*(E\cap B_i) + \mu^*(E\cap(\cup\seq{i}B_i)^c) \\
			& \geq \mu^*(E\cap(\cup\seq{i}B_i)) + \mu^*(E\cap(\cup\seq{i}B_i)^c) \\
\end{align*}

Since we already have the inequality going in the other direction, we have shown $\cup\seq{i}B_i=\cup\seq{i}C_i \in \ms{M}$. 

Taking $E = \cup\seq{i}B_i$, for $B_i$ disjoint, nonempty, then 
\begin{align*}
\mu^*(\cup\seq{i}B_i) & = \mu^*(E) \\
							  & = \sum\seq{i}\mu^*(E\cap B_i) + \mu^*(E\cap(\cup\seq{i}B_i)^c) \\
							  & = \sum\seq{i}\mu^*(B_i) + \mu^*(\varnothing) \\
\end{align*}

Thus $\mu^*(\cup\seq{i}B_i) = \sum\seq{i}B_i$. 

\qed

Back to Lebesgue outer measure. Let $\mc{X} = \R$. Recall we define 
\[
\mu^*(A) = \inf\{\sum\seq{i}|b_i-a_i|:A\subseteq\cup\seq{i}(a_i, b_i]\}
\]
We want to show that
\begin{enumerate}
\item $\mu^*$ is an outer measure
\item It gives the correct lengths to $(c, d]$, 
\item It is translation invariant
\item $\ms{B}_\R$ is contained in the collection of $\mu^*$-measurable sets. 
\end{enumerate}

In fact, we will study a generalization of Lebesgue outer measure that will give rise to Lebesgue-Stieljes measures. 

Recall: $F:\R\to\R\cup\{\oo\}$ is \underline{right continuous} if for all $x \in \R$, 
\[
\lim_{y\to x^+}F(y) = F(x)
\]

\defn

Given $F:\R\to\R$ non-decreasing and right-continuous, define
\[
\mu_F^*(A) = \inf\{\sum\seq{i}(F(b_i)-F(a_i)):A\subseteq\cup\seq{i}(a_i, b_i]\}
\]

Note: Katy HATES the term ``non-decreasing," and will use it interchangeably with the term ``increasing." To denote something which is not constant anywhere, she will say ``strictly" increasing. 

Why do we require $F$ to be nondecreasing?

\underline{Spoiler:} We will show \underline{any} finite measure $\mu$ on $\ms{B}_\R$ satisfies $\mu = \mu^*_F|_{\ms{B}_\R}$, for 
\[
F(x) = \mu((-\oo, x])
\]
We call $F$ the \underline{Cumulative Distribution Function}, or CDF. 

Note that if $\mu$ is a finite measure on $\ms{B}_\R$ and $F(x)$ is it's CDF, then $F$ is 
\begin{itemize}
\item \underline{Nondecreasing:} If $x\leq y$, then $(-\oo, x] \subseteq (-\oo, y]$, which implies $F(x)\leq F(y)$. 
\item \underline{Right-continuous:} For any decreasing sequence $x_n$ whose limit is $x$, $\lim_{n\to\oo}F(x_n) = \lim_{n\to\oo}\mu((-\oo, x_n]) = \mu((-\oo, x]) = F(x)$. The penultimate equality is due to $\mu$ being continuous from above, as it is a finite measure. 
\end{itemize}

\thm For any nondecreasing right-continuous $F$, $\mu^*_F$ is an outer measure. 

\proof

\begin{itemize}
\item First, $\mu^*_F(\varnothing) = \inf\{\sum\seq{i}F(b_i) - F(a_i) : \varnothing \subseteq \cup\seq{i}(a_i, b_i]\} = 0$, as every interval contains $\varnothing$ as a subset so we may set $a_i = b_i \equiv 1$ for all $i$. Since $\mu^*_F\geq0$ by definition, $\mu^*_F(\varnothing) = 0$
\item Now, we want to show that if $A\subseteq\cup\seq{i}B_i$, then $\mu^*_F(A)\leq\sum\seq{i}\mu^*_F(B_i)$. 

If $\mu^*_F(B_i) = \oo$ for some $i$, we are done. Without loss of generality, suppose $\mu^*_F(B_i)<\oo$ for each $i$. 

By the definition of $\inf$, for all $\varepsilon>0$ and each $i$ there exists $\{I_i^\varepsilon\}\seq{i}$ of intervals depending on $\varepsilon$ such that 
\begin{align*}
B_j & \subseteq\cup\seq{i}I_i^{j, \varepsilon} \\
\mu^*_F(B_j) & \leq \sum\seq{i}|I_i^{j, \varepsilon}| \leq \mu^*_F(B_j) + \frac{\varepsilon}{2j} \\
\end{align*}
Thus
\begin{align*}
A & \subseteq \cup\seq{j}\cup\seq{i}I_i^{j,\varepsilon} \\
\mu^*_F(A) & \leq \sum\seq{i, j}|I|_F^{j, \varepsilon} \\
& \leq \sum\seq{j}\mu^*_F(B_j) + \frac{\varepsilon}{2j} \\
& = \sum\seq{j}\mu^*_F(B_j) + \varepsilon \\
\end{align*}
\end{itemize}

Sending $\varepsilon\to0$ completes the proof. 

\qed

\thm For all $a, b \in \R$, $a \leq b$, 
\[
\mu^*((a, b]) = F(b) - F(a)
\]

\proof

$\leq$ follows quickly, since we know $(a, b]\subseteq (a, b] \cup \varnothing \cup \varnothing \cup \cdots$, so the definition of $\mu^*_F$ ensures
\[
\mu^*_F((a, b]) \leq \sum\seq{i}F(b_i) - F(a_i) = F(b) - F(a)
\]
Now we turn to $\geq$. Note that if $a = b$, we already showed that $\mu^*_F((a, b]) = \mu^*_F(\varnothing) = 0 = F(b) - F(a)$, so without loss of generality $a < b$. 

It suffices to show that if $(a, b]\subseteq\cup\seq{i}(a_i, b_i]$, then $F(b) - F(a) \leq \sum\seq{i}F(b_i) - F(a_i)$

Since $F$ is right continuous, for all $\varepsilon>0$ we can find $\delta_i>0$ such that $F(b_i + \delta_i) < F(b_i) + \frac{\varepsilon}{2^i}$. 

Note that 
\[
[a + \varepsilon, b]\subseteq(a, b] \subseteq \bigcup\seq{i}(a_i, b_i]\subseteq\bigcup\seq{i}(a_i, b_i+\delta_i)
\]
Since $[a +\varepsilon, b]$ is compact and $\{(a_i, b_i + \delta_i)\}\seq{i}$ is an open cover, there exists a finite subcover
\[
[s +\varepsilon] \subseteq\bigcup_{i=1}^N(a_i, b_i +\delta_i)
\]
Without loss of generality we may throw away any unnecessary elements of the cover. The ``first" element of the cover must overlap with exactly one other element of the cover, the ``second" interval. Thus we may assume that
\[
b_i + \delta_i\in(a_{i + 1}, b_{i + 1}+\delta_{i + 1})\forall i = 1, \dots, N - 1
\]

Tune in next time for the continuation!

\section*{Lecture 6} 

And now, for the exciting conclusion...

Since $F$ is nondecreasing, 
\begin{align*}
F(b) - F(a + \varepsilon) & \leq f(b_N + \delta_N) - F(a_1) \\
								   & = F(b_N + \delta_N) - F(a_N) + \sum_{i=1}^{N - 1}(F(a_{i + 1}) - F(a_i)) \\
									& = F(b_N + \delta_N) - F(a_N) + \sum_{i=1}^{N - 1} (F(b_i + \delta_i) - F(a_i)) \\
									& = \sum_{i=1}^N(F(b_i + \delta_i) - F(a_i)) \\
									& \leq \sum_{i=1}^N(F(b_i) - F(a_i) + \frac{\varepsilon}{2^i}) \\
									& \leq \abs*{\sum\seq{i}F(b_i) - F(a_i)} + \varepsilon \\
\end{align*}

Since $\varepsilon>0$ was arbitrary, and $F$ is right-continuous, sending $\varepsilon\to0$ gives the result. 

\qed

\defn

By Carath\'eodory's theorem, we know $\mu^*_F$ is a measure when restricted to $\ms{M}_{\mu^*_F}$, the collection of $\mu^*_F$-measurable sets. We will denote this measure by $\mu_F$, and call it the \underline{Legesgue-Stieljes} measure associated to $F$. 

How does this help our goals?

Is $\mu_F$ a Borel measure (that is, a measure when restricted to the Borel $\sigma$-algebra)? Yes

\thm

$\ms{B}_\R \subseteq\ms{M}_{\mu^*_F}$

\proof

It suffices to show that, for all $b \in \R$, $(-\oo, b] \in \ms{M}_{\mu^*_F}$. 

That is, we must show for all $E \subseteq \R$ 
\[
\mu^*_F(E)\geq \mu^*_F(E\cap(-\oo,b]) + \mu^*_F(E\cap(-\oo,b]^c)
\]
We already have $\leq$ by countable additivity. 

Fix a $\varepsilon>0$. By definition of $\mu^*_F$, there exists a cover $\{(a_i, b_i]\}\seq{i}$ such that $E\subseteq\bigcup\seq{i}(a_i, b_i]$ and

\[
\sum\seq{i}(F(b_i) - F(a_i)) \leq \mu^*_F(E) + \varepsilon
\]

Note that 
\begin{align*}
(a_i, b_i] \cap (-\oo, b] & \subseteq (a_i, b] \\
(a_i, b_i] \cap [b, \oo) & \subseteq (b, b_i] \\
\end{align*}
so
\begin{align*}
E\cap(-\oo,b] & \subseteq\bigcup\seq{i}(a_i, b] \\
E \cap [b, + \oo) & \subseteq \bigcup\seq{i}(b, b_i] \\
\end{align*}

\begin{align*}
\mu^*_F(E\cap(-\oo,b]) + \mu^*_F(E \cap [b, +\oo)) & \leq \sum\seq{i}(F(b) - F(a_i)) + \sum\seq{j}(F(b_j) - F(b)) \\
					& = \sum\seq{i}(F(b_i) - F(a_i)) \\
					& \leq \mu^*_F(E) + \varepsilon \\
\end{align*}

Sending $\varepsilon\to0$ gives us the result. 

\qed

\defn

When $F(x) = x$, we write $\lambda^* \eqdef\mu^*_F$, 

and we call it the \underline{Lebesgue outer measure}. Similarly, we write $\lambda \eqdef\mu_F$, and call it the \underline{Lebesgue measure}. Finally, $\ms{M}_{\lambda^*}\eqdef\ms{M}_{\mu^*_F}$, and we call this collection the \underline{Lebesgue measurable sets}. 

Thus, we know all Borel sets are Lebesgue measurable. 

In this way, we have found a Borel measure that gives the ``right" length to intervals $(a, b]$. 

The last ``intuitive" property of $\lambda$ that we seek to show is translation invariance. 

\thm

$\lambda^*$ is translation invariant on $2^\R$, and $\lambda$ is translation invariant on $\ms{M}_{\lambda^*}$. 

\proof For any $a \in\R$, $A\subseteq\R$, $A\subseteq\bigcup\seq{i}(a_i, b_i]$ is equivalent to

$A + a \subseteq\bigcup\seq{i}(a_i + a, b_i + a]$. 

Therefore $\lambda^*(A) = \lambda^*(A + a)$. The only thing left to show is $\ms{M}_{\lambda}$ is translation invariant. 

\claim Let $A \in \ms{M}_{\lambda^*}$. Then $A + a \in \ms{M}_{\lambda^*}$. 

\proof

Fix $E\subseteq\R$. We want to show 
\[
\lambda^*(E) = \lambda^*(E \cap (A + a)) + \lambda^*(E\cap (A + a)^c) 
\]
We know $\lambda^*$ is translation invariant, so 
\[
\lambda^*(E) = \lambda^*((E - a) \cap A) + \lambda^*((E - a) \cap A^c)
\]

For any $S\subseteq\R$, 
\begin{align*}
(E - a) \cap S & = \{x - a \mid x \in E, x - a \in S \} \\
					& = \{x \mid x \in E, x \in S + a\} \\
					& = E \cap(S + a) - a \\
\end{align*}

So

\begin{align*}
(S + a)^c & = \{y \mid y \not\in S + a\} \\
			 & = \{y \mid y - a \not\in S\} \\
			 & = \{y - a \mid y - a \not\in S\} \\
			 & = S^c + a \\
\end{align*}

Therefore

\begin{align*}
\lambda^*(E) & = \lambda^*(E \cap (A + a)) + a) + \lambda^*((E \cap (A^c + a)) - a) \\
				 & = \lambda^*((E\cap(A + a)) - a) + \lambda^*((E\cap(A + a)^c) - a) \\
				 & = \lambda^*(E\cap(A + a)) + \lambda^*(E\cap (A + a)^c) \\
\end{align*}

Thus, for any $A \in \ms{M}_{\lambda^*}$, we have $\lambda(A) \eqdef \lambda^*(A) = \lambda^*(A + a) \eqdef \lambda(A + a)$

\qed

In fact, \underline{all} finite Borel measures are of this form.
\thm

Suppose $\mu$ is a finite Borel measure. Then $\mu = \mu_F$, where $F$ is the cumulative distribution function, $F(x) = \mu((-\oo, x))$. 

\proof

Recall, we already showed that for any finite measure $\mu$ on $\ms{B}_\R$, $F(x) = \mu((-\oo, x])$ is nondecreasing and right-continuous. 

We seek to show $\mu(E) = \mu_F(E)$ for all $E \in \ms{B}_\R$. 

First, consider the half-open interval $(a, b]$, $a \leq b$. $\mu$ is a measure by hypothesis, so in particular is finitely additive: 
\[
\mu((a, b]) + \underbrace{\mu((-\oo, a])}_{=F(a)} = \underbrace{\mu((-\oo, b])}_{=F(b)}
\]

So, $\mu((a, b]) = F(b) - F(a) = \mu_F((a, b])$.

Now, fix $E\in \ms{B}_\R$. Consider $\{(a_i, b_i]\}\seq{i}$ such that $E \subseteq\bigcup\seq{i}(a_i, b_i]$. 

By countable subadditivity, 

\[
\mu(E)  \leq\sum\seq{i}\mu((a_i, b_i]) = \sum\seq{i}(F(b_i) - F(a_i)) 
\]

Taking the infimum over all such covers, $\mu(E) \leq \mu_F(E)$. It remains to show the opposite inequality.

Since $E\in\ms{B}_\R$ was arbitrary, 
\[
\mu(E^c)\leq \mu_F(E^c)
\]

Thus $\mu(E) + \mu(E^c) = \mu(\R)$. Then $\mu(E) =\mu(\R) - \mu(E^c)$. So 
\begin{align*}
\mu(E) & \geq \mu(\R) - \mu_F(E^c) \\
& = \mu_F(R) - \mu_F(E^c)) \\
& = \mu_F(E) \\
\end{align*}

But the above has a gap: in particular, we don't know that $\mu(\R) = \mu_F(\R)$. If we prove that, we are done. 

\claim 

$\mu(\R) = \mu_F(\R)$. 

\proof

\begin{align*}
\mu(\R) & = \mu\left(\bigcup\seq{i}[-i, i]\right) \overbrace{=}^{\text{by upper continuity}} \lim_{i\to\oo}\mu((-i, i]) \\
		  & = \lim_{i\to\oo}\mu_F((-i, i]) \underbrace{=}_{\text{by lower continuity}} \mu_F\left(\bigcup\seq{i}[-i, i]\right) = \mu_F(\R) \\
\end{align*}

\qed

We conclude our study of Borel measures on the real line with some regularity properties of Lebesgue-Stieljes measures. 

\lem

Given $F:\R\to\R$ nondecreasing, right-continuous, for all $E \in \ms{M}_{\mu^*_F}$, 
\[
\mu_F(E) = \inf\{\sum\seq{i}\mu_F((a_i, b_i)) \mid E\subseteq\bigcup\seq{i}(a_i, b_i), a_i \leq b_i \}
\]

\proof

By HW3Q2, 
\[
\mu_F(E) = \inf\{\sum\seq{i}\mu_F(A_i) \mid E \subseteq\bigcup\seq{i} A_i, \{A_i\}\seq{i} \in \ms{M}_{\mu^*_F}^\N\}
\]

Thus, ``$\leq$" must hold. It remains to show the opposite inequality. 

By definition, for all $E \in \ms{M}_{\mu^*_F}$, 
\[
\mu^*_F(E) = \inf\{\sum\seq{i}(F(b_i) - F(a_i)) \mid E \subseteq \bigcup\seq{i}(a_i, b_i], a_i \leq b_i\}
\]
Fix $\varepsilon>0$. Then there exists a sequence of intervals $\{(a_i, b_i]\}\seq{i}$ such that $E\subseteq\bigcup\seq{i}(a_i, b_i]$ and 
\[
\mu_F(E) + E \geq \sum\seq{i}(F(b_i) - F(a_i)) 
\]

Furthermore, for any $(a_i, b_i]$, we may define $B_n\eqdef (a_i, b_i + \frac{1}{n})$, and since $\mu_F(B_1)<+\oo$, continuity from above ensures
\[
\lim_{n\to\oo}\mu(B_n)=\mu_F\left(\bigcap\seq{i}B_n\right) = \mu_F((a_i, b_i])
\]

Thus, for all $i$, there exists a $\delta_i>0$ such that 
\[
\mu_F((a_i, b_i + \delta_i]) \leq \mu_F((a_i, b_i]) + \frac{\varepsilon}{2^i}
\]

Thus, 

\begin{align*}
\mu_F(E) & \leq \sum\seq{i}\mu_F((a_i, b_i + \delta_i]) \\
			& \leq \sum\seq{i}\mu_F((a_i, b_i]) + \frac{\varepsilon}{2^i} \\
			& \leq \mu_F(E) + 2\varepsilon\\
\end{align*}

Letting $\varepsilon\to0$, this shows the other direction. 

\qed

\section*{Lecture 7}

Recall: Given $F:\R\to\R$ nondecreasing and right continuous, 

\[
\mu^*_F(A) \eqdef \inf\{\sum_{i}((F(b_i) - F(a_i)) \mid A \subseteq \bigcup\seq{i}(a_i, b_i], a_i\leq b_i \}
\]

\thm 
\[
\mc{B}_\R \subseteq \mc{M}_{\mu^*_F}
\]

We will show that in general, this is a strict containment. 

\thm For any $E \in \mc{M}_{\mu^*_F}$, 
\begin{align*}
\mu_F(E) & = \inf\{\mu_F(U) \mid E \subseteq U, U \text{open}\} \\
			& = \sup\{\mu_F(K) \mid K \subseteq E, K \text{compact}\}
\end{align*}

\proof

Fix $E \in \mc{M}_{\mu^*_F}$. 

\subsubsection*{\underline{Step 1}}

Fix $\varepsilon>0$. The lemma proven in the previous lecture ensures that there exists $\{(a_i, b_i)\}\seq{i}$ such that $E \subseteq \cup\seq{i}(a_i, b_i)$ and 
\[
\mu_F\underbrace{\left(\bigcup\seq{i}(a_i, b_i)\right)}_{\eqdef U} \leq \sum\seq{i}\mu_F((a_i, b_i)) \leq \mu_F(E) + \varepsilon
\]
The first inequality is by countable additivity of $\mu$, and the second by construction. 

\subsubsection*{\underline{Step 2}}

There are a few cases:

\begin{enumerate}
\item In the first case, assume that $E$ is bounded. If $E$ is closed, then by Heine-Borel $E$ is compact, and taking $K = E$ gives the result. Next, suppose that $E$ is not closed. Fix $\varepsilon>0$. By step 1, there exists an open $U\supseteq \bar{E}\setminus E$ such that 
\[
\mu_F(U) \leq \mu_F(\bar{E}\setminus E) + \varepsilon
\]
Define $K = \bar{E}\setminus U$. Then $K$ is compact. By definition, 
\begin{align*}
K & = \bar{E} \cap U^c \subseteq \bar{E} \cap (\bar{E}\cap E^c)^c \\
  & = \bar{E} \cap (\bar{E}^c \cup E) = E \\
\end{align*}
So 
\[
\mu_F(E \cap U) + \mu_F(K) \geq \mu_F(E \cap U) + \mu_F(E\setminus U) = \mu_F(E)
\]
Since $E$ is bounded, $\mu_F(E \cap U) < +\oo$, $\mu_F(U)<+\oo$, so
\begin{align*}
\mu_F(K) & \geq\mu_F(E) - \mu_F(E \cap U) \\
			& = \mu_F(E) - (\mu_F(U) - \mu_F(E\setminus U)) \\
			& \geq \mu_F(E) - \mu_F(U) + \mu_F(\bar{E}\setminus E) \\
			& \geq \mu_F(E) - \varepsilon
\end{align*}
Since $\varepsilon > 0$ was arbitrary, this gives the result. 

\item In the second case, assume that $E$ is unbounded. Define $E_j = E \cap (j, j + 1], j \in \Z$. $E_j$ is clearly bounded, so by case 1, we know that for all $\varepsilon>0$, there exists a compact $K_j\subseteq E_j$, such that
\[
\mu_F(K_j) \geq \mu_F(E_j) - \frac{\varepsilon}{2^{|j|}}
\]

Then $H_n = \cup_{j=-n}^nE_j$ is compact, with $H_n \subseteq E$. By additivity, 
\begin{align*}
\mu_F(H_n) & = \sum_{j=-n}^n\mu_F(K_j)\geq\sum_{j=-n}^n\mu_F(E_j) - 2\varepsilon \\
			  & \geq \mu_F\left(\bigcup_{j=-n}^nE_j\right) - 2\varepsilon \\
\end{align*}

By continuity from below, we may pick $N \in \N$ sufficiently large so that
\[
\mu_F\left(\bigcup_{j=-N}^NE_j\right) \geq \mu_F(E) - \varepsilon
\]
Thus, 
\[
\mu_F(H_N)\geq \mu_F(E) - \varepsilon
\]
\end{enumerate}

\qed

Time for an important example. 

\exm The Cantor Set

Warmup: 

$\lambda(\{a\}) = 0$, $\lambda(\Q) = \lambda(\cup\seq{i}\{r_i\}))$, where $r_i$ is some enumeration of $\Q$. Then the above is equal to $\sum\seq{i}\lambda(\{r_i\}) = 0$. 

On the other hand, fix $\varepsilon>0$ and define 
\[
U = (0, 1) \cap \left(\bigcup\seq{j}(r_j - \frac{\varepsilon}{2^{j + 1}}, r_j + \frac{\varepsilon}{2^{j + 1}})\right)
\]

Then $U$ is open and dense in $(0, 1)$. From a topological perspective, this means that $U$ is ``large" (comeagre). 

However, in a measurable sense, $U$ is ``small:" 

\[
\lambda(U) \leq \sum\seq{j}\frac{\varepsilon}{2^j} = \varepsilon
\]

Note: $U$ depends on $\varepsilon$, so we have \underline{not} shown that $\mu(U) = 0$. 

Now we construct the Cantor set. 

Start with $U_1 = (0, 1)$. Let $U_2$ be $U_1$ with the middle third removed, so is two disjoint intervals. Inductively, let $U_i$ be $U_{i - 1}$, with the middle thirds of all intervals removed. Then the Cantor set is the intersection of all $U_i$. 

Alternatively, the Cantor set is every real in $(0, 1)$ whose base 3 expansion does not contain a $2$. 

\thm 

Let $C$ be the Cantor set. Then

\begin{enumerate}[label=(\roman*)]
\item $C$ is compact, nowhere dense, and totally disconnected (meaning the only connected subsets are singletons). Further, $C$ has no isolated points. 
\item $\lambda(C) = 0$. 
\item $C$ has cardinality of the continuum. 
\end{enumerate}

\subsection*{\underline{Measurable Functions}}

\defn

Given $f:X\to Y$, $f^{-1}(E) = \{x \in X \mid f(x) \in E\}$ is called the \underline{preimage of f}

These are basic set theory facts from HW 1:

\begin{align*}
f^{-1}(\cup_{\alpha}E_\alpha) & = \cup_{\alpha}f^{-1}(E_\alpha) \\
f^{-1}(E^c) & = (f^{-1}(E))^c \\
f^{-1}(\cap_\alpha E_\alpha ) & = \cap_\alpha f^{-1}(E\alpha) \\
\end{align*}

\defn

Suppose $(X, \mc{M}), (Y, \mc{N})$ are measurable spaces, and $f:X\to Y$. Then $\{f^{-1}(E) \mid E \in \mc{N}\}$ is the \underline{pullback of $\mc{N}$}, and $\{E \mid f^{-1}(E) \in \mc{M}\}$ is the \underline{pushforward of $\mc{M}$}. 

\defn

A function $f:X\to Y$ is \underline{$(\mc{M}, \mc{N})$-measurable} if for all $E \in \mc{N}$, $f^{-1}(E) \in \mc{M}$. 

Equivalently, the pullback of $\mc{M}$ is a subset of $N$. Equivalently, $\mc{N}$ is a subset of the pushforward of $\mc{M}$.

Informally, ``the inverse image of every measurable set is measurable" (Katy says the reason this isn't formal is because ``measurable set" already means something specific in the context of an outer measure). 

If $f:X\to \R (\bar{\R})$, we will suppose that the range is endowed with $\ms{B}_\R (\ms{B}_{\bar{\R}})$. 

\defn

\begin{enumerate}[label=(\alph*)]
\item $f:\R\to\bar{\R}$ is \underline{Lebesgue Measurable} if it is $(\mc{M}_{\lambda^*}, \ms{B}_{\bar{\R}})$-measurable. 
\item Given topological spaces $X, Y$, $f:X\to Y$ is \underline{Borel Measurable} if it is $(\ms{B}_X, \ms{B}_Y)$-measurable. 
\end{enumerate}

\rem Given $f:\R\to\bar{\R}$, which is a stronger criteria: being Borel measurable, or being Lebesgue measurable? Borel measurable implies Lebesgue measurable since $\ms{B}_\R \subseteq \mc{M}_{\lambda^*}$. 

\prop

Given measureable spaces $(X, \mc{M}), (Y, \mc{N})$, where $\mc{N}$ is generated by $\mc{E}$. Then $f:X\to Y$ is $(\mc{M}, \mc{N})$-measurable is equivalent to $f^{-1}(E) \in \mc{M}$ for all $E \in \mc{N}$. 

\proof

One direction is immediate. For the other direction, since $\{E: f^{-1}(E) \in \mc{M}\}$ (the pushforward of $\mc{M}$) is a $\sigma$-algebra containing $\mc{E}$. By assumption, $\mc{N}$ is generated by $\mc{E}$, meaning $\mc{N} \subseteq \{E \mid f^{-1}(E) \in \mc{M} \}$. 

\cor

If $X$ and $Y$ are topological spaces, then every continuous function $f:X\to Y$ is Borel measurable. 

\proof 

Since the open subsets of $Y$ generate the $\sigma$-algebra $\mc{N} = \mc{B}_Y$, the previous proposition ensures that it suffices to check $f^{-1}(U)\in\mc{B}_X$ for all $U$ open, and this is true, since $f^{-1}(U)$ is open. 

\cor

If $(X, \mc{M})$ is a measurable space and $f:X\to\R$ the following are equivalent: 
\begin{enumerate}[label=(\roman*)]
\item $f$ is $(\mc{M}, \ms{B}_\R)$-measurable. 
\item $f^{-1}((a, + \oo))\in\mc{M}$ for all $a \in \R$. 
\item $f^{-1}((-\oo, a)) \in \mc{M}$ for all $a \in \R$
\end{enumerate}

If $(X, \mc{M})$ is a measurable space and $f:X\to\bar{\R}$ the following are equivalent: 
\begin{enumerate}[label=(\roman*)]
\item $f$ is $(\mc{M}, \ms{B}_\R)$-measurable. 
\item $f^{-1}((a, + \oo])\in\mc{M}$ for all $a \in \R$. 
\item $f^{-1}([-\oo, a)) \in \mc{M}$ for all $a \in \R$
\end{enumerate}

\section*{Lecture 8}

\proof

Since open rays generate $\ms{B}_\R$, and half-open rays generate $\ms{B}_{\bar{\R}}$, this follows immediately from the proposition.

For the rest of this lecture, let $(X, \mc{M})$ be a measurable space. We say a function $f:X\to\bar{\R}$ is measurable if it is $(\mc{m}, \ms{B}_{\bar{\R}})$-measurable. 

\thm
Given $f_1, f_2, \dots:X\to\bar{\R}$ measurable, then the fullowing are also measurable: 
\begin{enumerate}[label=(\roman*)]
\item $f_i + f_j$
\item $f_if_j$ (our convention is $0\times x = 0$ even if $x = \pm \oo$. 
\item $f_i \vee f_j$, where $\vee$ means pointwise maximum, i.e. $f_i \vee f_j(x) = \max(f_i(x), f_j(x))$
\item $f_i \wedge f_j$, where $\wedge$ means pointwise minimum, i.e. $f_i \wedge f_j(x)=\min(f_i(x), f_j(x))$. 
\item $\sup_n f_n = \vee\seq{n} f_n$.
\item $\inf_n f_n = \wedge\seq{n} f_n$. 
\item $\limsup_{n\to\oo}f_n$
\item $\liminf_{n\to\oo}f_n$
\item $\lim_{n\to\oo}f_n$, if this limit exists everywhere. 
\end{enumerate}

\rem

Question: suppose $\sum\seq{i}f_i(x)$ exists for all $x\in X$. Does it follow that $\sum\seq{i}f_i(x)$ measurable? Yes! By part (i), any finite sum is measurable, and by part (ix) the limit of these partial sums (which is what an infinite sum is) is measurable. 

\proof
\begin{enumerate}[label=(\roman*)]
\item HW5
\item See above
\item Fix $a \in \R$. Then 
\begin{align*}
(f_i\vee f_j)^{-1}((a, + \oo]) & = \{x \in \mc{X} \mid f_i \vee f_j(x) > a \} \\
										& = \{x\in \mc{X} \mid f_i(x) > a \} \cup \{x \in \mc{X} \mid f_i \vee f_j (x) > a\} \\ 
										& = f_i^{-1}((a, +\oo]) \cup f_2^{-1}((a, +\oo]) \\
\end{align*}
By the previous corollary, we are done. 
\item Similar to above
\item Fix $a \in \R$. Then
\begin{align*}
(\sup_nf_n)^{-1}((a, + \oo]) & = \{x \in \mc{X} \mid \sup_nf_n(x) > a\} \\
										& = \cup\seq{n}\{x \in \mc{X} \mid f_n(x) > a \} \\
\end{align*}
By assumption, $\{x \in \mc{X} \mid f_i > a\}$ is measurable for all $a, i$. 
\item Similar to above
\item 
\[
\limsup_{n\to\oo}f_n = \inf_n\sup_{k\eq n}f_k 
\]
The right hand side is measurable by parts (v) and (vi)
\item Similar to above
\item Since $\lim_{n\to\oo}f_n(x)$ exists for all $x \in X,$ the $\limsup$ and $\liminf$ of the sequence both exist and are equal to the limit. So by (vii) this is measurable.
\end{enumerate}

\qed

\rem 

What about the composition of measurable functions? For example, if $f:\R\to\R$, $g:\R\to\R$ are both Borel measurable, then $f \circ g$ is Borel measurable. 

What if $f$, $g$ are Lebesgue measurable? No, because a function being ``Lebesgue measurable" means it is measurable when the domain has the Lebesgue $\sigma$-algebra, and the codomain has the Borel $\sigma$-algebra. In other words, it is ``Lebesgue Measurable" if the preimage of any Borel set is a Lebesgue set.

\subsection*{\underline{Only The Things Above Here Are On Midterm 1}}

\subsubsection*{Simple functions}

\defn

For any $A \subseteq \mc{X}$, the \underline{indicator function} of $A$ is the function 
\[
1_A(x) \eqdef \begin{cases} 1 & x \in A \\ 0 & \text{otherwise} \\ \end{cases}
\]

In the book, the notation $\chi_A$ is also used. Katy will not do this because, in her opinion, the notation ``$\chi_A$" is overloaded. 

\defn 

A $(\mc{M}, \ms{B}_\R)$-measurable function $f:\mc{X}\to\R$ is a \underline{simple function} if its image is a finite subset of $\R$. The \underline{standard representation} of a simple function is 
\[
f(x) = \sum_{i=1}^nc_i1_{E_i}(x)
\]
where $f(\mc{X}) = \{c_1, \dots, c_n\}$, and $E_i = f^{-1}(c_i)$. 

\rem

$\{E_i\}_{i=1}^n\subseteq\mc{M}$ is a disjoint partition of $\mc{X}$. 

\exm

There are many ways a simple function can be expressed as a linear combination of indicator functions: 
\begin{align*}
f(x) & \equiv 2 \\
& = 2\cdot1_{\R} \\
& = 2\cdot1_{[0, +\oo)} + 2\cdot1_{(-\oo, 0)} \\
& = etc. \\
\end{align*}

The last two are not in standard representation. 

It is ``easy" to define the integral of a simple function. 

\defn

For any measure space $(\mc{X}, \mc{M}, \mu)$, we can define the integral of a simple function to be
\[
\int f\,d\mu \eqdef \sum_{i=1}^nc_i\mu(E_i)
\]
Again, we use the convention $0\times\pm\oo = 0$. 

For $A \in \mc{M}$, define 
\[
\int_Af\,d\mu \eqdef \int f\cdot1_A\,d\mu
\]
$f \cdot 1_A$ is the simple function $\sum_{i=1}^nc_i1_{E_i \cap A}$. Note that $E_i \cap A$ could have zero measure, or even be empty. Recall that $\mu(\varnothing) = 0$. 

\rem 

Sometimes we will write
\[
\int_Af\,d\mu = \int_Af
\]
and suppress the $d\mu$ in the notation. 

Next, we will show that we can approximate any nonnegative measurable functions. 

\thm Given $f:\mc{X}\to[0,\oo]$ measurable, there exists a sequence $f_n$ of simple functions so that $f_n$ converges up to $f$ pointwise. To be clear: for each $x \in \mc{X}$, $f_n(x)$ is an increasing sequence which converges to $f(x)$. 

\proof

For $n \in \{0\} \cup \N$, $0 \leq k \leq 2^{2^n} - 1$, define
\[
E_n^k \eqdef f^{-1}((k2^{-n}, (k + 1)2^{-n}])
\]
and
\[
F_n \eqdef f^{-1}((2^n, +\oo])
\]
Now, let
\[
f_n \eqdef \sum_{k=0}^{2^{2^n} - 1}k2^{-n}1_{E_n^k} + 2^n1_{F_n}
\]

Key properties of this construction:
\begin{itemize}
\item $f_1 \leq f_2 \leq f_3 \leq \cdots$
\item $0 \leq f - f_n\leq2^{-n}$ on $F_n^c$. 
\end{itemize}

Thus, $f_n$ increases to $f$ pointwise. 

\qed

In order to apply this to integrate general nonnegative functions,  we will use the following properties of integrating simple functions. 

\prop

On simple functions, the integral is linear, and preserves order. That is, if $f \leq g$, then $\int f \leq \int g$. 

Further, $\nu(A) \eqdef \int_Af\,d\mu$ is a measure on $\mc{M}$. 


\section*{Lecture 9}

\proof

Let $f = \sum_{i=1}^na_i1_{E_i}, g = \sum_{j=1}^nb_j1_{F_j}$ be the standard representations of simple functions. 

\begin{enumerate}[label=(\alph*)]
\item Suppose $c \neq0$. Then, 
\[
c\int f = c\sum_{i=1}^na_i\mu(E_i) = \sum_{i=1}^nca_i\mu(E_i) = \int cf
\]
since $\sum_{i=1}^nca_i1_{E_i} = cf$ is the standard representation. 
\item $\{E_i\}_{i=1}^n, \{F_j\}_{j=1}^n$ are partitions of $X$. So 
\[
E_i = \coprod_{j=1}^mE_i\cap F_j,\, F_j = \coprod_{i=1}^nF_j\cap E_i
\]
By definition, 
\begin{align*}
\int f + \int g & =\sum_i a_i\mu(E_i) + \sum_jb_i\mu(F_j) \\
					 & = \sum_{i, j}\left(a_i\mu(E_i\cap F_j) + b_j\mu(E_i \cap F_j) \right) \\
					 & = \sum_{i, j}(a_i + b_j)\mu(E_i \cap F_j)\\
\end{align*}
Let $h = \sum_{i,j}(a_i + b_j)1_{E_i\cap F_j} = f + g$. But this is not necessarily the standard representation of $h$. 

Let $\{c_\ell\}_{\ell=1}^k$ be the distinct values of $\{a_i + b_j\}_{i, j}$. 

Likewise, let $G_\ell = h^{-1}(c_\ell) = \cup_{i, j, a_i + b_j = c}(E_i \cap F_j)$.

Then
\begin{align*}
\sum_{i, j}(a_i + b_j)\mu(E_i \cap F_j) & = \sum_{\ell=1}^k\sum_{i, j, a_i + b_j = c_\ell}(a_i + b_j)\mu(E_i \cap F_j) \\
												     & = \sum_{\ell=1}^kc_\ell\mu(G_\ell) \\
												     & = \int (f + g) \\
\end{align*}
\item If $f \leq g$, then $a_i \leq b_j$ whenever $E_i \cap F_j \neq\varnothing$. So
\[
\int f  = \sum_{i, j}a_i\mu(E_i \cap F_j) \leq \sum_{i, j}b_j\mu(E_i\cap F_j) = \int g
\]
\item Let $\nu(A) \eqdef \int_Af$. This is a nonnegative function on $\mc{M}$. Now,
\[
\nu(\varnothing) = \int_{\varnothing}f = \int f1_{\varnothing} = \int f 0 = 0\int f = 0
\]
Finally, given a disjoint sequence of sets $\{A_k\}\seq{k}, A = \cup\seq{k}A_k$, then
\begin{align*}
\nu(A) = & \int_Af = \int f1_A = \sum_{i, E_i \cap A \neq\varnothing,c_i\neq0}c_i\mu(E_i \cap A) \\
			& = \sum_{i=1}^na_i\mu(E_i\cap A) = \sum_{i, k}a_i\mu(E_i \cap A_k) \\
			& = \sum\seq{k}\sum_{i, E_i \cap A_k \neq0, a_i\neq0}\mu(E_i \cap A_k) \\
			& = \sum\seq{k}\int f1_{A_k} = \sum\seq{k}\nu(A_k)\\
\end{align*}
\end{enumerate}
\qed

\rem Parts (a) and (b) ensure we no longer have to worry about standard representations.

Suppose $f = \sum_{i=1}^nc_i1_{E_i} = \sum_{j=1}^nd_j1_{F_j}$. Then
\[
\sum_jd_j\mu(F_j) = \sum_jd_j\int1_{F_j} = \int\sum_jd_j1_{F_j} = \int f
\]

\subsection*{\underline{Integration of nonnegative measurable functions}}

Let $(X, \mc{M}, \mu)$ be a measure space. 

\defn

Given $f:X\to[0,\oo]$ measurable, define \underline{the integral of f} by
\[
\int fd\mu \eqdef \sup\{\int\phi\,d\mu \mid 0 \leq \phi \leq f, \phi\text{ simple}\}
\]

\rem 
\begin{enumerate}[label=(\roman*)]
\item If $f$ is simple, this agrees with our previous definition.
\item For $c \geq 0$,
\begin{align*}
\int cf\,d\mu & \eqdef \sup\{\int\phi\,d\mu \mid 0 \leq \phi \leq cf, \phi\text{ simple}\} \\
				  & = \sup\{\int\phi\,d\mu \mid 0 \leq \frac{\phi}{c} \leq f, \phi\text{ simple} \}\\
				  & = \sup\{\int c\psi\,d\mu \mid 0 \leq \psi \leq f, \psi\text{ simple} \} \\
				  & = c\sup\{\int\psi\,d\mu\mid0\leq\psi\leq f, \psi\text{ simple} \} \\
				  & = c\int f\,d\mu\\
\end{align*}
Likewise, if $c = 0$, we see $\int cf\,d\mu = 0$. 
\item If $f \leq g$, then $\int f \leq \int g$. This follows immediately from the definition. 
\end{enumerate}

Recall: A major deficiency of the Riemann integral is that it was difficult to develope minimal criteria to ensure
\[
\lim_{n\to\oo}\int f_n\,d\mu = \int\lim_{n\to\oo}f_n\,d\mu
\]

We are now ready for our second major theorem (the first being the characterization of all finite measures on $\R$ as Lebesgue-Stieljes measures)

\thm (Monotonce Convergence Theorem)

Given $\{f_n\}\seq{n}$ nonnegative measurable functions such that $f_n\leq f_{n + 1}$, then
\[
\lim_{n\to\oo}\int f_n\,d\mu = \int\lim_{n\to\oo}f_n\,d\mu
\]

\proof

``$\leq$" is easy - we know by monotonicity of $f_n$, $f_n \leq \lim_{n\to\oo}f_n$, so
\[
\int f_n \leq \int\lim_{n\to\oo}f_n
\]
Thus
\[
\lim_{n\to\oo}\int f_n = \limsup_{n\to\oo}\int f_n \leq \int \lim_{n\to\oo}f_n
\]

Now for ``$\geq$". 

Let $\phi$ be a simple function such that $0 \leq \phi \leq \lim_{n\to\oo}f_n$. 

Then, for any $a \in (0, 1)$, if $\phi(x)\neq0$, 
\[
a\phi(x)<\lim_{n\to\oo}f_n(x)
\]
Definte $E_n = \{x \mid f_n(x) \geq a\phi(x)\} \in \mc{M}$.

Since $f_n$ is increasing, $E_1\subseteq E_2 \subseteq E_3 \subseteq \cdots$.

Furthermore,$\cup\seq{n}E_n = X$, since if $\phi(x) = 0$, then $x\in E_n$ for all $x$, and if $\phi(x)\neq0$, the above ensures that for all $x \in X$, there is some $N$ such that $n \geq N$ implies $f_n(x) > a\phi(x)$.  

We have 
\[
\int f_n \geq \int_{E_n}f_n \geq \int_{E_n}a\phi
\]
Since $\nu(A) = \int_A\phi$ is a measure, by continuity from below, $\lim_{n\to\oo}\int_{E_n}\phi = \int_{\cup_nE_n} = \int \phi$. 

Thus, taking limits in the above expression, 
\[
\lim_{n\to\oo}\int f_n \geq a\int \phi
\]
Since $\phi$ was arbitrary, taking the supremum over $\phi$,
\[
\lim_{n\to\oo}\int f_n \geq a \int\lim_{n\to\oo}f_n
\]

Sending $a\to 1$ gives the result. 

\qed

\thm (Beppo-Levi)

Given $\{f_n\}\seq{n}$ a sequence of nonnegative measurable functions, 
\[
\sum\seq{n}\int f_nd\mu = \int\sum\seq{n}f_n\,d\mu
\]

\proof

First, fix $f, g$ nonnegative, measurable. There exist sequences $\{\phi_i\}\seq{i}, \{\psi_j\}\seq{j}$ simple, with $\phi_i\uparrow f, \psi_j\uparrow g$ pointwise. 

In particular, $\phi_i + \psi_i \uparrow f + g$. 

\begin{align*}
\int f + g & = \int\lim_{i\to\oo}\phi_i + \psi_i = \lim_{i\to\oo}\int\phi_i + \psi_i \\
			  & = \lim_{i\to\oo}\int\phi_i + \lim_{i\to\oo}\int\psi_i \\
			  & = \int\lim_{i\to\oo}\phi_i + \int\lim_{i\to\oo}\psi_i \\
			  & = \int f + \int g 
\end{align*}

By induction, for all $N \in \N$,
\[
\int\sum_{n=1}^Nf_n = \sum_{n=1}^N\int f_n
\]

















\end{document}